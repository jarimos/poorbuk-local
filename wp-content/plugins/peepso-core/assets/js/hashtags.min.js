!function r(s,o,l){function u(e,t){if(!o[e]){if(!s[e]){var a="function"==typeof require&&require;if(!t&&a)return a(e,!0);if(p)return p(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var n=o[e]={exports:{}};s[e][0].call(n.exports,function(t){return u(s[e][1][t]||t)},n,n.exports,r,s,o,l)}return o[e].exports}for(var p="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,v){(function(t){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var e,o=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},l="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,a="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null;function n(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var i,r,s,u=a.hashtags.url,p=+a.hashtags.everything||0,h=p?0:+a.hashtags.min_length||0,f=p?1e4:+a.hashtags.max_length||1e4,d=p?0:+a.hashtags.must_start_with_letter||0,c=(r=p?"(^|>|\\s)(#([^#\\s<]+))":"(^|>|\\s)(#("+((i=d)?"[a-z]":"")+"[a-z0-9]{"+Math.max(0,h-(i?1:0))+","+Math.max(0,f-(i?1:0))+"}))",new RegExp(r,"ig")),g=function(){function e(){var t=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s||((s=this).hashtag=void 0,this.$filter=null,this.$toggle=null,this.$input=null,this.$apply=null,this.assignHooks(),(0,o.default)(function(){t.initActivityFilter()})),s}var t,a,i;return t=e,(a=[{key:"filter",value:function(t){var e=this,a=this.hashtag;if(this.hashtag=t){var i=this.$toggle.data("keyword")+t+' <i class="ps-icon-remove"></i>';this.$toggle.html(i),this.$toggle.one("click","i",function(){e.filter("")});var n=(0,o.default)("#postbox-main textarea.ps-postbox-textarea").eq(0);n.length&&!n.val()&&n.val("#".concat(t," ")).trigger("input")}else{var r=this.$toggle.data("empty");this.$toggle.html(r);var s=(0,o.default)("#postbox-main textarea.ps-postbox-textarea").eq(0);s.length&&s.val()==="#".concat(a," ")&&s.val("").trigger("input")}this.$input.val(t),l.observer.doAction("peepso_stream_reset")}},{key:"assignHooks",value:function(){var e=this;l.observer.addFilter("peepso_postbox_beautifier",function(t){return t.replace(c,function(t,e,a,i){return e+'<ps_span class="ps-tag">'+a+"</ps_span>"})},20,1),l.observer.addFilter("peepso_activity",function(t){return e.hashtag&&(t=t.map(function(){var t=(0,o.default)(this).html();return"string"!=typeof t||t.match(c)?this:null})),t},10,1),l.observer.addFilter("peepso_activity_content",function(t){return t.replace(c,function(t,e,a,i){return e+'<a href="'+u+i+'/"><span class="ps-stream-hashtag">'+a+"</span></a>"})},10,1),l.observer.addFilter("show_more_posts",function(t){return e.hashtag&&(t.search_hashtag=e.hashtag),t},10,1)}},{key:"initActivityFilter",value:function(){var r=this;this.$filter=(0,o.default)(".ps-js-activitystream-filter").filter("[data-id=peepso_search_hashtag]"),this.$toggle=this.$filter.find(".ps-js-dropdown-toggle span"),this.$input=this.$filter.find("input[type=text]"),this.$apply=this.$filter.find(".ps-js-search-hashtag"),this.$input.on("input",function(t){var e=t.target,a=e.value,i=a.replace(p?/[#\s<]/g:/[^a-z0-9]/gi,""),n=i.length;a!==i&&(e.value=i),n<h||f<n?r.$apply.attr("disabled","disabled"):r.$apply.removeAttr("disabled")}).triggerHandler("input"),this.$input.on("keyup",function(t){13===t.keyCode&&(t.preventDefault(),t.stopPropagation(),r.$apply.click())}),this.$apply.on("click",function(){var t=o.default.trim(r.$input.val()),e=t.length;h<=e&&e<=f&&r.filter(t)});var t=decodeURIComponent(window.location.href),e=p?/\/\??hashtag\/([^#\s<\/]+)/:/\/\??hashtag\/([a-z0-9]+)/i,a=t.match(e);a&&this.filter(a[1])}}])&&n(t.prototype,a),i&&n(t,i),e}();new(v.default=g)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);