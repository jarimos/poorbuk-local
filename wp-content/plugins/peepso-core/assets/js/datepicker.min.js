!function(y){var t,e={},i={};window.peepsodatepickerdata&&peepsodatepickerdata.config&&(e=peepsodatepickerdata.config,t=_.map(e.daysShort,function(t){return t.replace(/^([a-z]{2}).+$/i,"$1")}),_.extend(i,{monthNames:e.months,monthNamesShort:e.monthsShort,dayNames:e.days,dayNamesShort:e.daysShort,dayNamesMin:t,currentText:e.today,dateFormat:e.format,isRTL:e.rtl,showButtonPanel:!0,currentText:e.today,closeText:e.apply,changeMonth:!0,changeYear:!0,yearRange:"-100:+0",firstDay:0})),_.extend(i,{beforeShow:function(t,e){e.dpDiv.wrap('<div class="peepso-datepicker" />'),setTimeout(function(){e.dpDiv.closest(".peepso-datepicker").on("click",function(t){t.stopPropagation()})},1)},beforeShowDay:function(){var t=y(this).data("datepicker");return a(t),[!0,""]},onClose:function(t,e){s(e),_.delay(function(){e.dpDiv.unwrap(".peepso-datepicker")},500)}}),y.jQueryDatepicker=y.datepicker,y.fn.jQueryDatepicker=y.fn.datepicker,y.fn.psDatepicker=function(e){return this.each(function(){var a=y(this),t="click.psDatepicker";return a.next("button").off(t).on(t,function(t){var e=a.data("datepicker").dpDiv;t.preventDefault(),t.stopPropagation(),e.is(":visible")?a.jQueryDatepicker("hide"):a.jQueryDatepicker("show")}),e=_.extend({},i,e||{}),a.jQueryDatepicker(e)})};var a=_.debounce(function(t){var e,a,i,n,r,d,o,p,c=t.dpDiv;i=(a=t).dpDiv,n=i.find(".ui-datepicker-prev"),r=i.find(".ui-datepicker-next"),d=i.find(".ui-datepicker-month"),o=i.find(".ui-datepicker-year"),p=i.find(".ui-datepicker-close"),s(a),i.on("keydown.ps-datepicker",{inst:a},f),n.on("click.ps-datepicker",{inst:a},u),r.on("click.ps-datepicker",{inst:a},u),d.on("change.ps-datepicker",{inst:a},u).on("click.ps-datepicker",{inst:a},function(t){t.stopPropagation()}),o.on("change.ps-datepicker",{inst:a},u).on("click.ps-datepicker",{inst:a},function(t){t.stopPropagation()}),p.on("click.ps-datepicker",{inst:a},l),P(t),(e=c.find(".ui-state-highlight")[0])||(e=c.find(".ui-state-active")[0]||c.find(".ui-datepicker-today a")[0]||c.find(".ui-state-default")[0],y(e).addClass("ui-state-highlight")),e.focus()},100);function s(t){var e=t.dpDiv,a=e.find(".ui-datepicker-prev"),i=e.find(".ui-datepicker-next"),n=e.find(".ui-datepicker-month"),r=e.find(".ui-datepicker-year"),d=e.find(".ui-datepicker-close");e.off("keydown.ps-datepicker"),a.off("click.ps-datepicker"),i.off("click.ps-datepicker"),n.off("change.ps-datepicker").off("click.ps-datepicker"),r.off("change.ps-datepicker").off("click.ps-datepicker"),d.off("click.ps-datepicker")}function f(t){var e,a,i,n,r,d,o,p,c,s,f,u,l,h,k=t.data.inst,v=t.target,g=t.which,D=t.altKey;37===g?(t.preventDefault(),t.stopPropagation(),function(t,e){var a,i,n=y(e).closest("td");n.length&&((a=n.prev("td")).length||(a=n.closest("tr").prev("tr").find("td").last()));a&&a.length&&(i=a.find(".ui-state-default"));i&&i.length?x(t,i):w(t,e,1)}(k,v)):36===g?(t.preventDefault(),t.stopPropagation(),l=k,(h=y(v).closest("tr").find(".ui-state-default").first())&&h.length&&x(l,h)):39===g?(t.preventDefault(),t.stopPropagation(),function(t,e){var a,i,n=y(e).closest("td");n.length&&((a=n.next("td")).length||(a=n.closest("tr").next("tr").find("td").first()));a&&a.length&&(i=a.find(".ui-state-default"));i&&i.length?x(t,i):m(t,e,1)}(k,v)):35===g?(t.preventDefault(),t.stopPropagation(),f=k,(u=y(v).closest("tr").find(".ui-state-default").last())&&u.length&&x(f,u)):38===g?(t.preventDefault(),t.stopPropagation(),function(t,e){var a,i=y(e).closest("td"),n=i.closest("tr").prev("tr").find("td").eq(i.prevAll().length);n&&n.length&&(a=n.find(".ui-state-default"));a&&a.length?x(t,a):w(t,e,7)}(k,v)):40===g?(t.preventDefault(),t.stopPropagation(),function(t,e){var a,i=y(e).closest("td"),n=i.closest("tr").next("tr").find("td").eq(i.prevAll().length);n&&n.length&&(a=n.find(".ui-state-default"));a&&a.length?x(t,a):m(t,e,7)}(k,v)):33===g?(t.preventDefault(),t.stopPropagation(),D?(o=v,p=(d=k).dpDiv,c=y(o).data("psDate"),s="#"+d.id.replace(/\\\\/g,"\\"),y.jQueryDatepicker._adjustDate(s,12,"M"),_.defer(function(){var t;P(d),t=(t=p.find("a.ui-state-default")).filter("[data-ps-date="+c+"]"),x(d,t)})):m(k,v)):34===g?(t.preventDefault(),t.stopPropagation(),D?(a=v,i=(e=k).dpDiv,n=y(a).data("psDate"),r="#"+e.id.replace(/\\\\/g,"\\"),y.jQueryDatepicker._adjustDate(r,-12,"M"),_.defer(function(){var t;P(e),t=(t=i.find("a.ui-state-default")).filter("[data-ps-date="+n+"]"),x(e,t)})):w(k,v)):13===g?j(k,v):27===g&&k.input.jQueryDatepicker("hide")}function w(e,t,a){var i=e.dpDiv,n=y(t).data("psDate"),r="#"+e.id.replace(/\\\\/g,"\\");void 0===a?n=new Date(e.drawYear,e.drawMonth,+n):"number"==typeof a&&(n=new Date(e.drawYear,e.drawMonth,+n-a)),y.jQueryDatepicker._adjustDate(r,-1,"M"),_.defer(function(){var t;P(e),t=(t=i.find("a.ui-state-default")).filter("[data-ps-date="+n.getDate()+"]"),x(e,t)})}function m(e,t,a){var i=e.dpDiv,n=y(t).data("psDate"),r="#"+e.id.replace(/\\\\/g,"\\");void 0===a?n=new Date(e.drawYear,e.drawMonth,+n):"number"==typeof a&&(n=new Date(e.drawYear,e.drawMonth,+n+a)),y.jQueryDatepicker._adjustDate(r,1,"M"),_.defer(function(){var t;P(e),t=(t=i.find("a.ui-state-default")).filter("[data-ps-date="+n.getDate()+"]"),x(e,t)})}function j(t,e){y(e).click()}function P(t){var e=t.dpDiv.find(".ui-datepicker-calendar"),a=t.settings,n=a.dayNames,r=a.monthNames[t.drawMonth],d=t.drawYear;e.attr("role","application"),e.find("tbody a.ui-state-default").attr("role","button").each(function(){var t,e=y(this),a=e.closest("td").prevAll().length,i=y.trim(e.text());t=i+", "+n[a]+" "+r+" "+d,e.removeClass("ui-state-hover"),e.attr("aria-label",t),e.attr("data-ps-date",i)})}function n(t){return t.dpDiv.find(".ui-state-highlight")}function x(t,e){t.dpDiv;var a=n(t),i=y(e);_.defer(function(){a.removeClass("ui-state-highlight"),i.focus(),i.addClass("ui-state-highlight")})}function u(t){var e=t.data.inst,a=new Date(e.selectedYear,e.selectedMonth,e.selectedDay),i=e.input;t.stopPropagation(),_.delay(function(){i.jQueryDatepicker("setDate",a)},100)}function l(t){var e=t.data.inst;j(0,n(e))}}(jQuery);