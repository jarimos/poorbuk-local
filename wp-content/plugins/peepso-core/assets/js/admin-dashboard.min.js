!function(e){e(document).ready(function(){var a=[];e.each(demographic_data,function(e,t){a.push({label:t.label,data:t.value,color:void 0!==t.color?t.color:null})}),e("#demographic-pie").css({width:"90%","min-height":"150px"});e.plot("#demographic-pie",a,demographic_options);var t=e("#peepso_dashboard_user_engagement .tab-pane.active .engagement_date_range");function n(){var a=[],n=[];e.each(e('#peepso_dashboard_user_engagement .tab-pane.active input[name="stats[]"]').serializeArray(),function(e,a){n.push(a.value)}),n=n.join(","),req={date_range:t.val(),module_id:e("#peepso_dashboard_user_engagement .nav-tabs .active").data("module-id"),stats:n},t.attr("disabled","disabled"),$PeepSo.postJson("adminEngagementDashboard.get_graph_data",req,function(n){e.each(n.data.series,function(t,n){n.label=e('#peepso_dashboard_user_engagement .tab-pane.active input[value="'+n.type+'"]').siblings(".lbl").text(),a.push(n)});e.plot("#peepso_dashboard_user_engagement .tab-pane.active .graph-container",a,{yaxis:{min:0},xaxis:{tickDecimals:0,mode:"time",timeformat:"%m/%d",min:n.data.min,max:n.data.max},legend:{labelFormatter:function(e,a){return a.total+" "+e}},series:{lines:{show:!0},points:{show:!0}},grid:{hoverable:!0,clickable:!0}});t.removeAttr("disabled")})}t.on("change",n).trigger("change"),e('#peepso_dashboard_user_engagement .tab-pane.active input[name="stats[]"]').on("click",n),e('#peepso_dashboard_user_engagement a[data-toggle="tab"]').on("shown.bs.tab",n),req={user_id:peepsoadmindashboarddata.user_id},e(".btn-subscribe").on("click",function(){$PeepSo.postJson("adminNewsletterDashboard.set_subscribed_user",req,function(e){})}),e(".btn-cancel").on("click",function(){$PeepSo.postJson("adminNewsletterDashboard.set_subscribed_user",req,function(e){location.reload()})})})}(jQuery);