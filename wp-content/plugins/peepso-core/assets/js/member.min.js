!function(e,s,n){var t=function(o,p){function e(){}return e.prototype.block_user=function(t,e){var s,a=this.block_user,i="block_"+t;a[i]||(e&&(e=p(e)).find("img").css("display","inline"),s={uid:peepsodata.currentuserid,user_id:t},a[i]=!0,peepso.postJson("activity.blockuser",s,p.proxy(function(e){var s=p(".ps-js-focus--"+t).find(".ps-focus-actions, .ps-focus-actions-mobile"),n=e.data;a[i]=!1,e.success?(n&&n.actions&&s.html(n.actions),ps_observer.apply_filters("ps_member_user_blocked",t,n),n&&(n.header||n.message)&&psmessage.show(n.header,n.message,psmessage.fade_time),n.redirect&&setTimeout(function(){o.location=n.redirect},Math.min(1e3,psmessage.fade_time))):e.errors&&alert(e.errors[0])},this)))},e.prototype.unblock_user=function(t,a){var e,i=this.unblock_user,o="block_"+t;i[o]||(a&&(a=p(a)).find("img").css("display","inline"),e={uid:peepsodata.currentuserid,user_id:t},i[o]=!0,peepso.postJson("activity.unblockuser",e,p.proxy(function(e){var s=p(".ps-js-focus--"+t).find(".ps-focus-actions, .ps-focus-actions-mobile"),n=e.data;i[o]=!1,e.success&&(n&&n.actions&&s.html(n.actions),ps_observer.apply_filters("ps_member_user_unblocked",t,n),n&&(n.header||n.message)&&psmessage.show(n.header,n.message,psmessage.fade_time),p(a).closest(".ps-members-item-wrapper").fadeOut("fast"))},this)))},e.prototype.ban_user=function(e,s){if(!this.banning_user){s&&(s=p(s)).find("img").css("display","inline");var n=peepsomemberdata.ban_popup_title,t=peepsomemberdata.ban_popup_content,a=['<button type="button" class="ps-btn ps-btn-small ps-button-cancel" onclick="return pswindow.do_no_confirm();">',peepsomemberdata.ban_popup_cancel,"</button>",'<button type="button" class="ps-btn ps-btn-small ps-button-action" onclick="return ps_member.do_ban_user('+e+');">',peepsomemberdata.ban_popup_save,"</button>"].join(" "),i=pswindow.show(n,t).set_actions(a).$container;i.find("#ban-forever").on("focus",function(){p("#ban-period-empty").hide()}),ps_datepicker.init(i.find("[name=ban_period_date]"))}},e.prototype.do_ban_user=function(s){var e,n=p("#form_ban_user"),t=n.find("input[name=ban_type]:checked").val();if("ban_period"===t&&!(e=n.find("input[name=ban_period_date]").data("value")))return n.find("#ban-period-empty").show(),!1;var a={user_id:s,ban_status:1,ban_type:t,ban_period_date:e};this.banning_user=!0,peepso.postJson("activity.set_ban_status",a,p.proxy(function(e){this.banning_user=!1,e.success&&(ps_observer.apply_filters("ps_member_user_banned",s,e.data),psmessage.show(e.data.header,e.data.message,psmessage.fade_time),setTimeout(function(){o.location.reload()},Math.min(1e3,psmessage.fade_time)))},this))},e.prototype.unban_user=function(s,e){this.unbanning_user||(e&&(e=p(e)).find("img").css("display","inline"),this.unbanning_user=!0,peepso.postJson("activity.set_ban_status",{user_id:s,ban_status:0},p.proxy(function(e){this.unbanning_user=!1,e.success&&(ps_observer.apply_filters("ps_member_user_unbanned",s,e.data),psmessage.show(e.data.header,e.data.message,psmessage.fade_time),setTimeout(function(){o.location.reload()},Math.min(1e3,psmessage.fade_time)))},this)))},e}(window,jQuery);ps_member=new t}();