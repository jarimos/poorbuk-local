jQuery(function(u){u("input[name=peepso_admin_verbose_tabs]").on("click",_.throttle(function(e,t){var i=u(".ps-label-optional"),n=peepsodata.ajaxurl;this.checked?i.show():i.hide(),t||u.post({url:n,data:{action:"peepso_admin_verbose_tabs",value:+this.checked}})},1e3)).triggerHandler("click",[!0]),u("input[name=peepso_admin_verbose_fields]").on("click",_.throttle(function(e,t){var i=u(".lbl-descript");url=peepsodata.ajaxurl,action="peepso_admin_verbose_fields",this.checked?i.show():i.hide(),t||u.post({url:url,data:{action:action,value:+this.checked}})},1e3)).triggerHandler("click",[!0]),u("input[name=bundle]").on("click",_.throttle(function(e,t){var i=u(".license_status_check");$bundleLicense=u("input[name=bundle_license]"),bundleLicense=$bundleLicense.val(),checked=this.checked,checked?($bundleLicense.closest(".form-group").show(),u("#field_bundle_message").hide()):($bundleLicense.closest(".form-group").hide(),u("#field_bundle_message").show()),i.each(function(){var e=u(this).closest("label").next("div.form-field").find("input");checked?(e.data("origLicense",e.val()),e.val(bundleLicense),e.attr("readonly","readonly").css("opacity",.5)):t||(e.removeAttr("readonly").css("opacity",""),e.val(e.data("origLicense")||""))})},100)).triggerHandler("click",[!0]),u("input[name=bundle_license]").on("input focus blur",_.throttle(function(e){var t=u(".license_status_check"),i=this.value,n=u.trim(i),a=u("input[name=bundle]")[0].checked;i!==n&&(this.value=i=n),a&&t.each(function(){u(this).closest("label").next("div.form-field").find("input").val(i)})},100)),u("input[name=loadmore_enable]").on("click",_.throttle(function(){var e=u("select[name=loadmore_repeat]").closest(".form-group");this.checked?e.show():e.hide()},100)).triggerHandler("click"),u("select[name=notification_ajax_delay_min]").on("change",_.throttle(function(){var e=u("select[name=notification_ajax_delay]"),t=+e.val(),i=+this.value;t<i&&e.val(i)},100)),u("select[name=notification_ajax_delay]").on("change",_.throttle(function(){var e=+u("select[name=notification_ajax_delay_min]").val();+this.value<e&&u(this).val(e)},100)).triggerHandler("change"),u("input[name=brute_force_enable]").on("click",_.throttle(function(){var e,t=u("select[name=brute_force_max_retries]"),i=u("select[name=brute_force_reset_retries]");t=t.closest(".form-group"),i=i.closest(".form-group").next(".clearfix"),e=t.add(i).add(t.nextUntil(i)),this.checked?e.show():e.hide()},100)).triggerHandler("click"),u(document).ready(function(){var e=500;u("input[name=reporting_notify_email]").on("click",_.throttle(function(){var e=u("textarea[name=reporting_notify_email_list]").closest(".form-group");this.checked?e.show():e.hide()},100)).triggerHandler("click"),u("input[name=site_reporting_enable]").on("click",_.throttle(function(){var e=u("textarea[name=site_reporting_types]"),t=u("input[name=reporting_notify_email]"),i=u("textarea[name=reporting_notify_email_list]"),n=e.add(t).add(i).closest(".form-group");this.checked?(n.show(),t.triggerHandler("click")):n.hide()},100)).triggerHandler("click");var t=u("input[name='site_registration_recaptcha_enable']");0<t.size()&&t.on("change",function(){u(this).is(":checked")?(u("#field_site_registration_recaptcha_sitekey").fadeIn(e),u("#field_site_registration_recaptcha_secretkey").fadeIn(e),u("#field_site_registration_recaptcha_description").fadeIn(e)):(u("#field_site_registration_recaptcha_sitekey").fadeOut(e),u("#field_site_registration_recaptcha_secretkey").fadeOut(e),u("#field_site_registration_recaptcha_description").fadeOut(e))}).trigger("change");var i=u("input[name='site_registration_enableterms']");0<i.size()&&i.on("change",function(){u(this).is(":checked")?u("#field_site_registration_terms").fadeIn(e):u("#field_site_registration_terms").fadeOut(e)}).trigger("change");var n=u("input[name='site_registration_enableprivacy']");0<n.size()&&n.on("change",function(){u(this).is(":checked")?u("#field_site_registration_privacy").fadeIn(e):u("#field_site_registration_privacy").fadeOut(e)}).trigger("change");var a=u("input[name='avatars_wordpress_only']");0<a.size()&&a.on("change",function(){u(this).is(":checked")?(u("#field_avatars_peepso_only").fadeOut(e).find("input[name=avatars_peepso_only]").attr("disabled","disabled"),u("#field_avatars_peepso_gravatar").fadeOut(e),u("#field_avatars_wordpress_only_desc").fadeIn(e)):(u("#field_avatars_peepso_only").fadeIn(e).find("input[name=avatars_peepso_only]").removeAttr("disabled"),u("#field_avatars_peepso_gravatar").fadeIn(e),u("#field_avatars_wordpress_only_desc").fadeOut(e))}).trigger("change"),function(){var r=u(".license_status_check"),t={};function e(){$PeepSo.postJson("adminConfigLicense.check_license",{plugins:t},function(e){var t,i,n,a;if(e.success)for(n in t=e.data&&e.data.valid||{},i=e.data&&e.data.details||{},t)+t[n]?(a='<i class="ace-icon fa fa-check bigger-110" style="color:green"></i>',u("#error_"+n).hide()):(a='<i class="ace-icon fa fa-times bigger-110" style="color:red"></i>',u("#error_"+n).show()),i[n]&&(a=a+"<br/>"+i[n]),r.filter("#"+n).html(a)})}r.length&&(r.each(function(){var e=u(this);t[e.attr("id")]=e.data("plugin-name"),e.closest("label").next("div.form-field").find("input").on("input focus blur",_.throttle(function(e){var t=this.value,i=u.trim(t);t!==i&&(this.value=i)},500))}),e(),setInterval(function(){e()},3e4))}();var r=u("#reset-check");if(r.length){var o=u("#reset-do");r.on("click",function(){this.checked?o.removeAttr("disabled"):o.attr("disabled","disabled")}),o.on("click",function(e){e.preventDefault(),e.stopPropagation();var t=window.location.href;t=t.replace("&reset=1",""),window.location=t+"&reset=1"})}var s,l,c=window.location.href.match(/page=(peepso(?:[-_a-z]+)?)(?:&(tab=[-a-z]+))?/i),d="rgba(240,245,250,.7)";c&&((s=u("#toplevel_page_peepso li.current ul.wp-submenu-wrap").find("a[href]")).length&&(l=c[2]?s.filter('[href$="'+c[2]+'"]'):s.eq(0)),s.not(l).css({color:d,fontWeight:"normal"}).on("mouseenter",function(){u(this).css({color:"#00b9eb"})}).on("mouseleave",function(){u(this).css({color:d})}))});var h={};function e(){u("input[type=text].validate").off("keyup.validate").on("keyup.validate",function(){var p,g,e=u(this);g=(p=e).data(),clearTimeout(t),t=setTimeout(function(){var e,t,i,n,a,r,o,s,l,c,d;"int"===g.ruleType?(l=g,c=+(s=p).val(),d=s.attr("name"),l.ruleMin=+l.ruleMin,l.ruleMax=+l.ruleMax,l.ruleMin&&c<l.ruleMin?(f(s,l),h[d]=!0):l.ruleMax&&c>l.ruleMax?(f(s,l),h[d]=!0):(m(s,l),h[d]=!1,delete h[d])):"email"===g.ruleType?(r=g,o=(a=p).val(),/^([*+!.&#$Â¦\'\\%\/0-9a-z^_`{}=?~:-]+)@(([0-9a-z-]+\.)+[0-9a-z]{2,15})$/i.test(o)?(m(a,r),h[name]=!1,delete h[name]):(f(a,r),h[name]=!0)):(t=g,i=(e=p).val(),n=e.attr("name"),t.ruleMinLength=+t.ruleMinLength,t.ruleMaxLength=+t.ruleMaxLength,t.ruleMinLength&&i.length<t.ruleMinLength?(f(e,t),h[n]=!0):t.ruleMaxLength&&i.length>t.ruleMaxLength?(f(e,t),h[n]=!0):(m(e,t),h[n]=!1,delete h[n])),v()},300)}).trigger("keyup")}var t=!1;function f(e,t){e.hasClass("error")||(t.ruleMessage&&(e.next(".validate-error").length||u(['<div class="validate-error tooltip bottom">','<div class="tooltip-arrow"></div>','<div class="tooltip-inner">',t.ruleMessage,"</div></div>"].join("")).insertAfter(e)),e.addClass("error"))}function m(e,t){e.hasClass("error")&&e.removeClass("error")}var i=!1;function v(){clearTimeout(i),i=setTimeout(n,300)}function n(){var e,t=!1;for(e in h)if(h[e]){t=!0;break}var i=u("#peepso button[type=submit]");t?i.attr("disabled","disabled"):i.removeAttr("disabled")}var a=!1;function r(){clearTimeout(a),a=setTimeout(o,300)}function o(){u("#edit_warning").show()}function s(e){u(".img-landing-page-preview").attr("src",e).show(),u(".btn-lp-img-remove").show(),u(".default-img-selected").hide(),u("#landing_page_image").val(e)}function l(){u("#landing_page_image").val(""),u(".img-landing-page-preview").attr("src",u("#landing_page_image_default").val()),u(".btn-lp-img-remove").hide(),u(".default-img-selected").show()}u(function(){e(),u("#peepso button[type=reset]").on("click",function(){setTimeout(e,100),setTimeout(function(){u("#edit_warning").hide()},1e3)}),setTimeout(function(){u("#peepso").find("input[type=text], textarea").on("keyup",function(){r()}),u("#peepso").find("input[type=checkbox], select").on("change",function(){r()})},1e3)}),u(document).ready(function(){0<u(".inline-select").length&&u(".inline-select").on("click",function(e){u(this).closest("ul").find("a").removeClass("btn-primary"),u(this).closest(".form-group").find('input[type="hidden"]').val(u(this).attr("data-value")),u(this).addClass("btn-primary"),e.preventDefault()});var e=u("input[name='opengraph_enable']");function i(e){u(".img-og-preview").attr("src",e).show(),u(".btn-img-remove").show(),u(".no-img-selected").hide(),u("#opengraph_image").val(e)}function t(){u("#opengraph_image").val(""),u(".img-og-preview").attr("src",""),u(".img-og-preview, .btn-img-remove").hide(),u(".no-img-selected").show()}0<e.size()&&(e.on("change",function(){$selector=u(this).closest(".inside").find('[id*="field_"]').not("#field_opengraph_enable"),u(this).is(":checked")?$selector.fadeIn(500):$selector.fadeOut(500)}).trigger("change"),u("#opengraph_title").after("<p class='text-right'><span class='opengraph_title_counter'></span> Characters</p><p>Depending on where the links will be shared, the title can be cropped to even 40 characters. Keep the title short and to the point.</p>"),u(".opengraph_title_counter").html(u("#opengraph_title").val().length),u("#opengraph_title").on("keyup",function(e){u(".opengraph_title_counter").html(u("#opengraph_title").val().length)}),u("#opengraph_description").after("<p class='text-right'><span class='opengraph_description_counter'></span> Characters</p><p>Depending on where the links will be shared, the description can be cropped to even 200 characters. Keep the description short and to the point.</p>"),u(".opengraph_description_counter").html(u("#opengraph_description").val().length),u("#opengraph_description").on("keyup",function(e){u(".opengraph_description_counter").html(u("#opengraph_description").val().length)})),$og_image_prop='<a class="btn btn-sm btn-info btn-img-og" href="#">Select Image</a> <a class="btn btn-sm btn-danger btn-img-remove" href="#">Remove Image</a><span class="no-img-selected">No image selected</span><img class="img-responsive img-og-preview" src="" />',u("#opengraph_image").after($og_image_prop).hide(),""!=u("#opengraph_image").val()?i(u("#opengraph_image").val()):t(),u(".btn-img-og").on("click",function(e){var t=u(this);wp.media.editor.send.attachment=function(e,t){i(t.url)},wp.media.editor.open(t)}),u(".btn-img-remove").on("click",function(e){t(),e.preventDefault()})}),$lp_image_prop='<a class="btn btn-sm btn-info btn-img-landing-page" href="#">Select Image</a> <a class="btn btn-sm btn-danger btn-lp-img-remove" href="#">Remove Image</a><span class="default-img-selected">Default image selected</span><img class="img-responsive img-landing-page-preview" src="" />',u("#landing_page_image").after($lp_image_prop).hide(),u("#landing_page_image_default").hide(),""!=u("#landing_page_image").val()?s(u("#landing_page_image").val()):l(),u(".btn-img-landing-page").on("click",function(e){wp.media.editor.send.attachment=function(e,t){s(t.url)},wp.media.editor.open()}),u(".btn-lp-img-remove").on("click",function(e){l(),e.preventDefault()}),u(".notice.is-dismissible.peepso-new-plugin").on("click",".notice-dismiss",function(){u.post(ajaxurl,{action:"dismiss_new_plugin_notice"})})});